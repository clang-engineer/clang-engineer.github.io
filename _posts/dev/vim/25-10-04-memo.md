---
title       : Vim 관련 메모
description : 
date        : 2025-10-04 13:44:22 +0900
updated     : 2025-10-05 13:31:20 +0900
categories  : [dev, vim]
tags        : [vim, neovim, memo]
pin         : false
hidden      : false
---

# 🧠 Vim & Neovim 정리 노트

---

## 📍 Marks

* `m` + 키 : 마크 설정
* `:delm {key}` : 특정 마크 삭제
* `:delm!` : 모든 마크 삭제
* `` ` `` : 마크 목록 표시

---

## 🔍 keywordprg

* `<Shift> + K` : 커서 위치의 키워드 설명 보기
* `man` 페이지로 설정 가능

  ```vim
  :set keywordprg=man
  ```

---

## ⏪ Undo History

* `u` : Undo
* `<C-r>` : Redo
* `:undolist` : Undo 히스토리 확인
* `:UndotreeToggle` : Undo 트리 보기 (📦 `undotree` 플러그인 필요)

---

## 🧩 Fold

| 단축키         | 기능                   |
| :---------- | :------------------- |
| `z m / z M` | 전체 접기                |
| `z r / z R` | 전체 펼치기               |
| `z c / z o` | 현재 커서 위치 fold 접기/펼치기 |
| `z a`       | fold 토글              |

---

## 💾 인코딩 변경

### 1️⃣ 현재 보이는 문자의 인코딩 수정

```vim
:e ++enc=utf-8
:e ++enc=euc-kr
```

### 2️⃣ 현재 파일의 인코딩 수정

```vim
:set fileencoding=utf-8 
:set fileencoding=euc-kr
```

---

## ⚙️ Neovim 설치 및 설정

### 1️⃣ Neovim 설치

```sh
brew install neovim
```

### 2️⃣ vim-plug 설치

```sh
sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
```

### 3️⃣ 설정 파일 생성

```vim
" ~/.config/nvim/init.vim
call plug#begin('~/.vim/plugged')
Plug 'preservim/nerdtree'
...
call plug#end()

set number
...
```

### 4️⃣ 플러그인 설치

```vim
:PlugInstall
```

---

## 💡 Neovim을 IDE처럼 사용하기 — CoC.nvim

### 🔧 개요

기존 Vim 자동완성 플러그인보다 `coc.nvim`이 훨씬 강력하고 IDE에 가까운 기능 제공.

### 1️⃣ Node.js 설치

```sh
curl -sL install-node.vercel.app/lts | bash
```

### 2️⃣ vim-plug에 추가

```vim
Plug 'neoclide/coc.nvim', {'branch': 'release'}
```

### 3️⃣ 설치

```vim
:PlugInstall
```

### 4️⃣ 언어별 플러그인 설치

```vim
:CocInstall coc-json coc-tsserver
:CocCommand coc-clangd
" 안 될 경우
:CocCommand clangd.install
```

> 🔗 참고: [neoclide/coc.nvim GitHub](https://github.com/neoclide/coc.nvim)

---

## ⚠️ Swap File Error 해결

비정상 종료 후 임시파일이 남아있을 때 발생.
아래 폴더를 정리하면 해결됨.

```sh
rm -rf ~/.local/share/nvim/swap/*
```

---

## ⚙️ 주요 Vim 옵션 정리

| 옵션                                      | 기능                  |
| --------------------------------------- | ------------------- |
| `set nocompatible`                      | 오리지널 vi와 호환되지 않음    |
| `set autoindent`                        | 자동 들여쓰기             |
| `set cindent`                           | C 언어 전용 들여쓰기        |
| `set smartindent`                       | 스마트 들여쓰기            |
| `set wrap`                              | 줄바꿈 허용              |
| `set nowrapscan`                        | 검색 시 문서 끝에서 되돌리지 않음 |
| `set nobackup`                          | 백업파일 생성 안 함         |
| `set visualbell`                        | 잘못된 키 입력 시 시각적 알림   |
| `set ruler`                             | 커서 위치 표시            |
| `set shiftwidth=4`                      | 자동 들여쓰기 4칸          |
| `set number`                            | 행 번호 표시             |
| `set fencs=ucs-bom,utf-8,euc-kr,latin1` | 다양한 인코딩 처리          |
| `set fileencoding=utf-8`                | 파일 저장 인코딩           |
| `set tenc=utf-8`                        | 터미널 인코딩             |
| `set expandtab`                         | 탭 대신 스페이스           |
| `set hlsearch`                          | 검색어 하이라이팅           |
| `set ignorecase`                        | 대소문자 무시 검색          |
| `set tabstop=4`                         | 탭 간격 4칸             |
| `set incsearch`                         | 점진적 검색              |
| `syntax on`                             | 구문 강조               |
| `filetype indent on`                    | 파일 유형별 구문 강조        |
| `set background=dark`                   | 색상 테마 배경 설정         |
| `colorscheme desert`                    | 색상 테마               |
| `set backspace=eol,start,indent`        | 백스페이스 허용 범위 설정      |
| `set history=1000`                      | 편집 기록 개수 설정         |

---

## 🧾 문단 들여쓰기

| 명령     | 설명          |
| ------ | ----------- |
| `> %`  | 중괄호 구간 들여쓰기 |
| `> ib` | 소괄호 내부 들여쓰기 |
| `> at` | 태그 구간 들여쓰기  |

---

## 📂 여러 파일 편집

| 단축키         | 기능         |            |
| :---------- | :--------- | ---------- |
| `<C-w> + x` | 창 교체       |            |
| `<C-w> + _` | 가로 분리 시 확대 |            |
| `<C-w> +    | `          | 세로 분리 시 확대 |
| `<C-w> + =` | 창 크기 균등 조정 |            |

---

## ✨ 자동완성 기능

### 기본 자동완성

| 단축키             | 기능                      |
| :-------------- | :---------------------- |
| `<C-p> / <C-n>` | Vim 기본 자동완성 (insert 모드) |
| `<C-x><C-l>`    | 라인 단위 자동완성              |
| `<C-x><C-f>`    | 파일명 / 경로 자동완성           |

---

## 🪄 Abbreviate (축약어)

오타 교정, 자동완성에 활용 가능

| 명령      | 적용 모드            |
| :------ | :--------------- |
| `abbr`  | insert + command |
| `iabbr` | insert 전용        |
| `cabbr` | command 전용       |

```vim
" 오타 교정
abbr consolee console
abbr coment comment

" 자동완성
abbr cns console.log()
abbr cmt /* */

" <Esc> 활용 복구
abbr cmt /* */<Esc>hhi

" expr 활용 동적 자동완성
iabbr __email abcd@efgh.com
iabbr <expr> __time strftime("%Y-%m-%d %H:%M:%S")
iabbr <expr> __file expand('%:p')
iabbr <expr> __name expand('%')
iabbr <expr> __pwd expand('%:p:h')
iabbr <expr> __branch system("git rev-parse --abbrev-ref HEAD")
```

> 📚 참고: [John Grib’s Vim Auto Completion](https://johngrib.github.io/wiki/vim-auto-completion/)


---

## Buffer & Window
```sh
:e! # 현재 버퍼 강제 재로드
:e # 현재 버퍼 재로드
```
